{
	"name": "Serverless-External-Parquet",
	"properties": {
		"content": {
			"query": "DROP EXTERNAL TABLE logdata\n\nDROP EXTERNAL DATA SOURCE log_data\n\nDROP EXTERNAL FILE FORMAT TextFileFormat\n\nDROP DATABASE SCOPED CREDENTIAL SasToken\n\nCREATE DATABASE SCOPED CREDENTIAL SasToken\nWITH IDENTITY = 'SHARED ACCESS SIGNATURE',\nSECRET = 'sv=2022-11-02&ss=b&srt=sco&sp=rwdl&se=2023-12-21T04:24:47Z&st=2023-11-30T20:24:47Z&spr=https&sig=%2B2nC0udVl6M9g45lXvGqc5kJK%2FytM6PhCeD4hFnE6Ao%3D'\n\nCREATE EXTERNAL DATA SOURCE log_data_parquet\nWITH ( LOCATION = 'https://datalake1231231.blob.core.windows.net/parquet',\n        CREDENTIAL = SasToken )\n\nCREATE EXTERNAL FILE FORMAT ParquetFileFormat WITH (\n    FORMAT_TYPE=PARQUET,\n    DATA_COMPRESSION='org.apache.hadoop.io.compress.SnappyCodec'\n)\n\nCREATE EXTERNAL TABLE [logdata_parquet]\n(\n    [Correlationid] [varchar](200) NULL,\n    [Operationname] [varchar](200) NULL,\n    [Status] [varchar](100) NULL,\n    [Eventcategory] [varchar](100) NULL,\n    [Level] [varchar](200) NULL,\n    [Time] [varchar](200) NULL,\n    [Subscription] [varchar](200) NULL,\n    [Eventinitiatedby] [varchar](1000) NULL,\n    [Resourcetype] [varchar](1000) NULL,\n    [Resourcegroup] [varchar](1000) NULL,\n    [Resource] [varchar](2000) NULL\n)\nWITH (\n    LOCATION = '/log.parquet',\n    DATA_SOURCE = log_data_parquet,\n    FILE_FORMAT = ParquetFileFormat\n)\n\nSELECT * from [logdata_parquet]\n\nSELECT [Operationname], COUNT([Operationname]) AS [Operation Count]\nFROM [logdata_parquet]\nGROUP BY [Operationname]\nORDER BY [Operation Count]\n\nDROP EXTERNAL TABLE logdata_parquet\nDROP EXTERNAL DATA SOURCE log_data_parquet\nDROP DATABASE SCOPED CREDENTIAL SasToken",
			"metadata": {
				"language": "sql"
			},
			"currentConnection": {
				"databaseName": "appdb",
				"poolName": "Built-in"
			},
			"resultLimit": 5000
		},
		"type": "SqlQuery"
	}
}